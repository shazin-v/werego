<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="/static/user/book.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-lightness/jquery-ui.css' rel='stylesheet'>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>booking</title>
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
   
  </head>
<body>
    
    <!-- HEADER SECTION -->
  
        <header>
          <a href="{{ url_for('home') }}" class="logo"> <img src="/static/pic/logo.png" alt="logo"> </a>
          <nav>
            <ul>
              <li><a href="{{ url_for('home') }}">Home</a></li>
              <!-- <li><a href="{{ url_for('find_your_charger') }}">Find your charger</a></li> -->
              <li><a href="{{ url_for('about') }}">About</a></li>
              <li><a href="{{ url_for('contact_us') }}">Contact us</a></li>
          </ul>
          </nav>
        </header>
    
        <body>
    
    <!-- BODY SECTION -->
    
    <div class="d-flex toggled" id="wrapper">
    
        <!-- Sidebar -->
        <div class="bg-light border-right" id="sidebar-wrapper">
          <div class="text-right">
              <span class="icon-bar top-bar"></span>
              <span class="icon-bar middle-bar"></span>
           
            </button>
          </div>
      
          <!-- <div class="sidebar-heading">Start Bootstrap </div> -->
          <div class="list-group list-group-flush">
            <a href="/user-dashboard" class="list-group-item list-group-item-action bg-light">Dashboard</a>
            <a href="/user-profile" class="list-group-item list-group-item-action bg-light">Profile</a>
            <a href="{{ url_for('user_find_your_charger') }}" class="list-group-item list-group-item-action bg-light">book a new slot</a>
            <a href="/logout" class="list-group-item list-group-item-action bg-light">logout</a>
           
            
          </div>
        </div>
        <div id="sidebar-empty-space" class="empty-space-sidebar"></div>
        <!-- /#sidebar-wrapper -->
      
        <!-- Page Content -->
        <div id="page-content-wrapper">
      
          <nav class="navbar navbar-light scroll scrolling-navbar py-2">
            <!-- <button class="sidebar-toggler" id="sidebar-toggle-onNavbar"> -->
              <!-- <span class="icon-bar top-bar"></span> -->
              <!-- <span class="icon-bar middle-bar"></span> -->
              <!-- <span class="icon-bar bottom-bar"></span> -->
            </button>
      
            <!-- <div class="container scroll d-flex flex-row justify-content-center px-0">
              <a class="nav-link nav-link-secondary" href="https://www.schermabergamo.it/prossime-gare/">Prossime gare
                <div class="navbar-underline"></div></a>
              <a class="nav-link nav-link-secondary" href="https://www.schermabergamo.it/calendari-gare/">Calendari gare
                <div class="navbar-underline"></div></a>
              <a class="nav-link nav-link-secondary" href="https://www.adfencing.it/schermabergamo/login.php" target="_blank" rel="author noopener">Gestionale
                <div class="navbar-underline"></div></a>
            </div>
       -->
          </nav>
        


<div>
         
  <h1>Booking Page</h1>
  <form action="/book" method="POST">
    <label for="station-name">Station Name:</label><br>
    <input type="text" id="station-name" name="station_name" value="{{ request.args.get('station_name') }}" readonly>
    <label for="city">City:</label><br>
    <input type="text" id="city" name="city" value="{{ request.args.get('city') }}" readonly>
                
    <label for="available_ports">Selected Port:</label><br>
    <input type="text" id="available_ports" name="available_ports" value="{{ request.args.get('available_ports') }}" readonly>
    <label for="booking_date">Booking Date:</label><br>
    <input type="date" id="booking_date" name="booking_date" required>
    <label for="time_from">Time from:</label><br>
    <input type="time" id="time_from" name="time_from" required>
    <label for="time_to">Time to:</label>
    <input type="time" id="time_to" name="time_to" required><br>
    <button type="submit" onclick="bookNow()">Book Now</button>
  </form>
  

            
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
            <script>
              $(document).ready(function() {
                $(function() {
                  $("#my_date_picker1").datepicker({
                    minDate: 0,
                    maxDate: '+1Y',
                    dateFormat: 'dd-mm-yy'
                  });
                });
            
                $('#my_date_picker1').change(function() {
                  startDate = $(this).datepicker('getDate');
                  // Only set minDate if an end date picker exists
                  if ($("#my_date_picker2").length) {
                    $("#my_date_picker2").datepicker("option", "minDate", startDate);
                  }
                });
            
                function today() {
                  var d = new Date();
                  return d.toLocaleDateString();
                }
            
                function now() {
                  var d = new Date();
                  var curr_hour = d.getHours();
                  var curr_min = d.getMinutes();
                  // Add leading zeroes to the minute value if it is less than 10
                  if (curr_min < 10) {
                    curr_min = "0" + curr_min;
                  }
                  return (curr_hour + ":" + curr_min);
                }
            
                $('#time_from').change(function() {
                  startTime = $(this).val();
                  $("#time_to").attr("min", startTime);
                });
              });
            
              function bookNow() {
                // Get the values of all the inputs
                const available_port = $("#available_ports option:selected").val();
                const booking_date = $("#my_date_picker1").val();
                const time_from = $("#time_from").val();
                const time_to = $("#time_to").val();
            
                // Check if any of the fields are empty
                if (available_port === "" || booking_date === "" || time_from === "" || time_to === "") {
                  if (booking_date === "") {
                    alert("Please select a date to book.");
                  } else if (time_from === "" || time_to === "") {
                    alert("Please select a time to book.");
                  } else {
                    alert("Please fill in all the fields before booking.");
                  }
                } else {
                  // Show a confirmation popup
                  if (confirm("Are you sure you want to book this port?")) {
                    alert("Booking Successful!");
                    // Redirect to user dashboard page
                    window.location.href = "/user-dashboard";
                    // Reload the page after 2 seconds
                    setTimeout(function() {
                      location.reload();
                    }, 2000);
                  }
                }
              }
            </script>
            
              
            </div>
              
        
    </body>
    
    
    <!-- FOOTER SECTION -->
    
    
     
    
            <!-- <footer>
                <div class="footer-content">
                    <h3>footer</h3>
                    <p>&copy; 2023 EV Charging Station Finder. All rights reserved.</p>
                </div>
            </footer> -->
       
        </html>
